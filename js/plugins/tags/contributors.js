"use strict";var ContributorsJS={requestAPI:function(t,r,e){var n=5;!function a(){return new Promise(function(o,i){var u=0,s=setTimeout(function(){0===u&&(u=2,s=null,i("请求超时"),0==n&&e())},5e3);fetch(t).then(function(t){if(2!==u&&(clearTimeout(s),o(t),s=null,u=1),t.ok)return t.json();throw new Error("Network response was not ok.")}).then(function(t){n=0,r(t)})["catch"](function(t){n>0?(n-=1,setTimeout(function(){a()},5e3)):e()})})}()},layout:function(t){var r=t.el;ContributorsJS.requestAPI(t.api,function(e){r.querySelector(".loading-wrap").remove();var n="";(e||[]).forEach(function(r,e){var a='<div class="user-card">';a+='<a class="card-link" target="_blank" rel="external noopener noreferrer"',a+=' href="'+r.html_url+'">',a+='<img alt="'+r.login+'" src="'+(r.avatar_url||t.avatar)+'" onerror="errorImgAvatar(this)">',a+='<div class="name"><span>'+r.login+"</span></div>",a+="</a>",n+=a+="</div>"}),r.querySelector(".group-body").innerHTML=n},function(){try{r.querySelector(".loading-wrap svg").remove(),r.querySelector(".loading-wrap p").innerText("加载失败，请稍后重试。")}catch(t){}})},start:function(){for(var t=document.getElementsByClassName("contributorsjs-wrap"),r=0;r<t.length;r++){var e=t[r],n=e.getAttribute("api");if(null!=n){var a=new Object;a.el=e,a.api=n,a["class"]=e.getAttribute("class"),a.avatar=volantis.GLOBAL_CONFIG["default"].avatar,ContributorsJS.layout(a)}}}};ContributorsJS.start(),document.addEventListener("pjax:complete",function(){ContributorsJS.start()});
//# sourceMappingURL=../../../maps/js/plugins/tags/contributors.js.map
