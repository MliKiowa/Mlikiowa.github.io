{"version":3,"sources":["js/plugins/rightMenu.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_regenerator","e","t","r","n","toStringTag","i","c","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","this","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_invoke","enumerable","configurable","writable","_defineProperty","_toPropertyKey","_toPrimitive","toPrimitive","String","Number","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","RightMenu","rightMenuConfig","volantis","GLOBAL_CONFIG","plugins","rightmenu","messageRightMenu","message","enable","fn","_rightMenuWrapper","document","getElementById","_rightMenuContent","_printHtml","_menuMusic","_readingModel","_readBkg","_menuLoad","querySelectorAll","_menuOption","querySelector","_searchWord","_copyText","_copyPaste","_copySelect","_copyCut","_copyHref","_copySrc","_copyImg","_openTab","_backward","_toggle","_forward","urlRegx","init","DOMController","visible","parentNode","removeChild","readBkg","createElement","className","id","window","body","appendChild","initEvent","oncontextmenu","event","ctrlKey","offsetWidth","hideMenu","popMenu","stopPropagation","preventDefault","removeEventListener","addEventListener","onclick","RightMenuAplayer","aplayerBackward","aplayerToggle","aplayerForward","mouseClientX","clientX","mouseClientY","clientY","screenWidth","documentElement","clientWidth","screenHeight","clientHeight","setMenuItem","focus","style","zIndex","menuWidth","menuHeight","offsetHeight","showLeft","showTop","left","top","notice","showMessage","error","blur","console","NoticeRightMenu","localStorage","getItem","VolantisApp","icon","faicon","time","setItem","optionFlag","eventTarget","target","selectText","getSelection","toString","tagName","toLowerCase","inputStr","select","statrPos","selectionStart","endPos","selectionEnd","copyString","substring","readClipboard","text","insertAtCaret","err","eventHref","href","test","open","eventSrc","currentSrc","trimEnd","endsWith","writeClipImg","flag","OpenSearch","_printArticle","pathName","location","pathname","question","printHtml","readingModel","aplayer","APlayer","player","undefined","music_alwaysShow","status","forEach","ele","layout","includes","checkAPlayer","str","utilWriteClipText","messageCopyright","writeClipText","navigator","clipboard","writeText","reject","input","setAttribute","result","execCommand","_ref","_callee","success","parentElement","data","blob","dom","textRange","selection","range","_context","customPicUrl","replace","old","fetch","write","ClipboardItem","type","createTextRange","moveToElementText","createRange","selectNodeContents","removeAllRanges","addRange","_x","_x2","_x3","_callee2","_context2","permissions","query","name","state","readText","elemt","startPos","scrollTop","isReadModel","remove","setStyle","setTimeout","print","innerHTML","reload","ScrollReveal","clean","fadeToggle","toggleClass","option","backgroundColor","hasClass","destroy","freeze","requestAnimationFrame","readyState","pjax","send"],"mappings":"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","file":"../../../js/plugins/rightMenu.js","sourcesContent":["const RightMenu = (() => {\n  const\n    rightMenuConfig = volantis.GLOBAL_CONFIG.plugins.rightmenu,\n    messageRightMenu = volantis.GLOBAL_CONFIG.plugins.message.enable && volantis.GLOBAL_CONFIG.plugins.message.rightmenu.enable;\n\n  const\n    fn = {},\n    _rightMenuWrapper = document.getElementById('rightmenu-wrapper'),\n    _rightMenuContent = document.getElementById('rightmenu-content'),\n    _printHtml = document.getElementById('printHtml'),\n    _menuMusic = document.getElementById('menuMusic'),\n    _readingModel = document.getElementById('readingModel'),\n    _readBkg = document.getElementById('read_bkg');\n\n  const\n    _menuLoad = document.querySelectorAll('.menuLoad-Content'),\n    _menuOption = document.querySelector('.menu-Option'),\n    _searchWord = document.querySelector('.menu-Option[data-fn-type=\"searchWord\"]'),\n    _copyText = document.querySelector('.menu-Option[data-fn-type=\"copyText\"]'),\n    _copyPaste = document.querySelector('.menu-Option[data-fn-type=\"copyPaste\"]'),\n    _copySelect = document.querySelector('.menu-Option[data-fn-type=\"copySelect\"]'),\n    _copyCut = document.querySelector('.menu-Option[data-fn-type=\"copyCut\"]'),\n    _copyHref = document.querySelector('.menu-Option[data-fn-type=\"copyHref\"]'),\n    _copySrc = document.querySelector('.menu-Option[data-fn-type=\"copySrc\"]'),\n    _copyImg = document.querySelector('.menu-Option[data-fn-type=\"copyImg\"]'),\n    _openTab = document.querySelector('.menu-Option[data-fn-type=\"openTab\"]'),\n    _backward = document.querySelector('#menuMusic .backward'),\n    _toggle = document.querySelector('#menuMusic .toggle'),\n    _forward = document.querySelector('#menuMusic .forward');\n\n  const urlRegx = /^((https|http)?:\\/\\/)+[A-Za-z0-9]+\\.[A-Za-z0-9]+[\\/=\\?%\\-&_~`@[\\]\\':+!]*([^<>\\\"\\\"])*$/;\n\n  fn.init = () => {\n    DOMController.visible(_menuMusic, false);\n    DOMController.visible(_menuOption, false);\n    if (_readBkg) _readBkg.parentNode.removeChild(_readBkg);\n\n    const readBkg = document.createElement(\"div\");\n    readBkg.className = \"common_read_bkg common_read_hide\";\n    readBkg.id = \"read_bkg\";\n    window.document.body.appendChild(readBkg);\n  }\n\n  fn.initEvent = () => {\n    window.document.oncontextmenu = (event) => {\n      if (event.ctrlKey || document.body.offsetWidth <= 500) {\n        fn.hideMenu();\n        return true;\n      }\n      return fn.popMenu(event);\n    }\n\n    _rightMenuWrapper.oncontextmenu = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      return false;\n    }\n\n    window.removeEventListener('blur', fn.hideMenu);\n    window.addEventListener('blur', fn.hideMenu);\n    document.body.removeEventListener('click', fn.hideMenu);\n    document.body.addEventListener('click', fn.hideMenu);\n\n    if (_forward && _toggle && _forward) {\n      _backward.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        RightMenuAplayer.aplayerBackward();\n      }\n      _toggle.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        RightMenuAplayer.aplayerToggle();\n      }\n      _forward.onclick = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        RightMenuAplayer.aplayerForward();\n      }\n    }\n  }\n\n  // 菜单位置设定\n  fn.popMenu = (event) => {\n    let mouseClientX = event.clientX;\n    let mouseClientY = event.clientY;\n    let screenWidth = document.documentElement.clientWidth || document.body.clientWidth;\n    let screenHeight = document.documentElement.clientHeight || document.body.clientHeight;\n\n    try {\n      fn.setMenuItem(event);\n      DOMController.visible(_rightMenuWrapper);\n      _rightMenuWrapper.focus();\n      _rightMenuWrapper.style.zIndex = '-2147483648';\n      let menuWidth = _rightMenuContent.offsetWidth;\n      let menuHeight = _rightMenuContent.offsetHeight;\n      let showLeft = mouseClientX + menuWidth > screenWidth ? mouseClientX - menuWidth + 10 : mouseClientX;\n      let showTop = mouseClientY + menuHeight > screenHeight ? mouseClientY - menuHeight + 10 : mouseClientY;\n      showTop = mouseClientY + menuHeight > screenHeight && showTop < menuHeight && mouseClientY < menuHeight ?\n        showTop + (screenHeight - menuHeight - showTop - 10) : showTop;\n      _rightMenuWrapper.style.left = showLeft + \"px\";\n      _rightMenuWrapper.style.top = showTop + \"px\";\n      _rightMenuWrapper.style.zIndex = '2147483648';\n      if (volantis.GLOBAL_CONFIG.plugins.message.rightmenu.notice) fn.showMessage();\n    } catch (error) {\n      _rightMenuWrapper.blur();\n      console.error(error);\n      return true;\n    }\n\n    return false;\n  }\n\n  // 消息提示\n  fn.showMessage = () => {\n    const NoticeRightMenu = localStorage.getItem('NoticeRightMenu') === 'true';\n    if (messageRightMenu && !NoticeRightMenu)\n      VolantisApp.message('右键菜单', '唤醒原系统菜单请使用：<kbd>Ctrl</kbd> + <kbd>右键</kbd>', {\n        icon: rightMenuConfig.faicon + ' fa-exclamation-square red',\n        time: 9000\n      }, () => {\n        localStorage.setItem('NoticeRightMenu', 'true')\n      });\n  }\n\n  // 菜单项设置\n  fn.setMenuItem = (event) => {\n    let optionFlag = false;\n    const eventTarget = event.target;\n    const selectText = window.getSelection().toString();\n    DOMController.visible(_openTab, false); // 隐藏新标签页打开\n\n    // 判断是否是输入框\n    if (eventTarget.tagName.toLowerCase() === 'input' || eventTarget.tagName.toLowerCase() === 'textarea') {\n      const inputStr = eventTarget.value;\n\n      // 全选\n      if (inputStr.length > 0) {\n        DOMController.visible(_copySelect);\n        _copySelect.onclick = () => {\n          event.preventDefault();\n          eventTarget.select();\n        }\n      } else {\n        DOMController.visible(_copySelect, false);\n      }\n\n      // 剪切\n      if (selectText) {\n        DOMController.visible(_copyCut);\n        _copyCut.onclick = () => {\n          const statrPos = eventTarget.selectionStart;\n          const endPos = eventTarget.selectionEnd;\n          fn.copyString(selectText);\n          eventTarget.value = inputStr.substring(0, statrPos) + inputStr.substring(endPos, inputStr.length);\n          eventTarget.selectionStart = statrPos;\n          eventTarget.selectionEnd = statrPos;\n          eventTarget.focus();\n        }\n      } else {\n        DOMController.visible(_copyCut, false);\n      }\n\n      // 粘贴\n      fn.readClipboard().then(text => {\n        // 如果剪切板存在内容\n        if (!!text) {\n          DOMController.visible(_copyPaste);\n          _copyPaste.onclick = () => {\n            fn.insertAtCaret(eventTarget, text);\n          }\n        } else {\n          DOMController.visible(_copyPaste, false);\n        }\n      }).catch((err) => {\n        console.error(err);\n        DOMController.visible(_copyPaste, false);\n      });\n    } else {\n      DOMController.visible(_copySelect, false);\n      DOMController.visible(_copyPaste, false);\n      DOMController.visible(_copyCut, false);\n    }\n\n    // 新标签打开链接\n    const eventHref = eventTarget.href;\n    if (!!eventHref && urlRegx.test(eventHref)) {\n      optionFlag = true;\n      DOMController.visible(_copyHref);\n      DOMController.visible(_openTab);\n      if (_copyHref) _copyHref.onclick = () => {\n        fn.copyString(eventHref);\n      }\n      _openTab.onclick = () => {\n        window.open(eventHref);\n      }\n    } else {\n      DOMController.visible(_copyHref, false);\n    }\n\n    // 新标签打开图片 & 复制图片链接\n    const eventSrc = eventTarget.currentSrc;\n    if (!!eventSrc && urlRegx.test(eventSrc)) {\n      optionFlag = true;\n      DOMController.visible(_copySrc);\n      DOMController.visible(_openTab);\n\n      _copySrc.onclick = () => {\n        fn.copyString(eventSrc);\n      }\n\n      _openTab.onclick = () => {\n        window.open(eventSrc);\n      }\n    } else {\n      DOMController.visible(_copySrc, false);\n    }\n\n    // 复制图片\n    if (!!eventSrc && urlRegx.test(eventSrc) && eventSrc.trimEnd().endsWith('.png')) {\n      optionFlag = true;\n      DOMController.visible(_copyImg);\n\n      _copyImg.onclick = () => {\n        fn.writeClipImg(event, flag => {\n          if (flag && messageRightMenu) VolantisApp.message('系统提示', '图片复制成功！', {\n            icon: rightMenuConfig.faicon + ' fa-images'\n          });\n        }, (error) => {\n          if (messageRightMenu) VolantisApp.message('系统提示', '复制失败：' + error, {\n            icon: rightMenuConfig.faicon + ' fa-exclamation-square red'\n          });\n        })\n      }\n    } else {\n      DOMController.visible(_copyImg, false);\n    }\n\n    // 复制文本\n    if (selectText) {\n      optionFlag = true;\n      DOMController.visible(_copyText);\n      DOMController.visible(_searchWord);\n\n      _copyText.onclick = () => {\n        fn.copyString(selectText);\n      }\n\n      !!_searchWord && (_searchWord.onclick = () => {\n        OpenSearch(selectText);\n      })\n    } else {\n      DOMController.visible(_copyText, false);\n      DOMController.visible(_searchWord, false);\n    }\n\n    // 打印\n    const _printArticle = document.querySelector('#post.article') || null;\n    const pathName = window.location.pathname;\n    if (!!_printArticle) {\n      DOMController.visible(_printHtml);\n      DOMController.visible(_readingModel);\n\n      if (_printHtml) {\n        _printHtml.onclick = () => {\n          if (window.location.pathname === pathName) {\n            const message = '是否打印当前页面？<br><em style=\"font-size: 80%\">建议打印时勾选背景图形</em><br>';\n            if (messageRightMenu) VolantisApp.question('', message, {}, () => {\n              fn.printHtml();\n            })\n          } else {\n            fn.hideMenu();\n          }\n        }\n      }\n\n      if (_readingModel) {\n        _readingModel.onclick = () => {\n          if (window.location.pathname === pathName) {\n            fn.readingModel();\n          } else {\n            fn.readingModel();\n          }\n        }\n      }\n\n    } else {\n      DOMController.visible(_printHtml, false);\n      DOMController.visible(_readingModel, false);\n    }\n\n    if (volantis.GLOBAL_CONFIG.plugins.aplayer.enable\n      && typeof RightMenuAplayer !== 'undefined'\n      && RightMenuAplayer.APlayer.player !== undefined) {\n      if (rightMenuConfig.music_alwaysShow) {\n        DOMController.visible(_menuMusic);\n      } else if (RightMenuAplayer.APlayer.status === 'play' || RightMenuAplayer.APlayer.status === 'undefined') {\n        optionFlag = true;\n        DOMController.visible(_menuMusic);\n      } else {\n        DOMController.visible(_menuMusic, false);\n      }\n    } else {\n      DOMController.visible(_menuMusic, false);\n    }\n\n    _menuLoad.forEach(ele => {\n      DOMController.visible(ele, !optionFlag);\n    })\n\n    if (volantis.GLOBAL_CONFIG.plugins.aplayer.enable\n      && rightMenuConfig.layout.includes('music')) {\n      RightMenuAplayer.checkAPlayer();\n    }\n  }\n\n  // 隐藏菜单\n  fn.hideMenu = () => {\n    DOMController.visible(_rightMenuWrapper, false);\n  }\n\n  // 复制字符串\n  fn.copyString = (str) => {\n    VolantisApp.utilWriteClipText(str)\n      .then(() => {\n        if (messageRightMenu) {\n          VolantisApp.messageCopyright();\n        }\n      }).catch(e => {\n        if (messageRightMenu) {\n          VolantisApp.message('系统提示', e, {\n            icon: rightMenuConfig.faicon + ' fa-exclamation-square red'\n          });\n        }\n      })\n  }\n\n  // 写入文本到剪切板\n  fn.writeClipText = (str) => {\n    try {\n      return navigator.clipboard\n        .writeText(str)\n        .then(() => {\n          return Promise.resolve()\n        })\n        .catch(err => {\n          return Promise.reject(err)\n        })\n    } catch (e) {\n      const input = document.createElement('input');\n      input.setAttribute('readonly', 'readonly');\n      document.body.appendChild(input);\n      input.setAttribute('value', str);\n      input.select();\n      try {\n        let result = document.execCommand('copy')\n        document.body.removeChild(input);\n        if (!result || result === 'unsuccessful') {\n          return Promise.reject('复制文本失败!')\n        } else {\n          return Promise.resolve()\n        }\n      } catch (e) {\n        document.body.removeChild(input);\n        return Promise.reject(\n          '当前浏览器不支持复制功能，请检查更新或更换其他浏览器操作!'\n        )\n      }\n    }\n  }\n\n  // 写入图片到剪切板\n  fn.writeClipImg = async function (event, success, error) {\n    const eventSrc = rightMenuConfig.customPicUrl.enable ?\n      event.target.currentSrc.replace(rightMenuConfig.customPicUrl.old, rightMenuConfig.customPicUrl.new) :\n      event.target.currentSrc;\n    const parentElement = event.target.parentElement;\n    try {\n      const data = await fetch(eventSrc);\n      const blob = await data.blob();\n      await navigator.clipboard\n        .write([\n          new ClipboardItem({\n            [blob.type]: blob\n          })\n        ]).then(() => {\n          success(true);\n        }, (e) => {\n          console.error('图片复制失败：', e);\n          error(e);\n        });\n    } catch (e) {\n      const dom = document;\n      try {\n        if (dom.body.createTextRange) {\n          const textRange = document.body.createTextRange();\n          textRange.moveToElementText(parentElement);\n          textRange.select();\n        } else if (window.getSelection) {\n          const selection = window.getSelection();\n          const range = document.createRange();\n          range.selectNodeContents(parentElement);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n        document.execCommand('copy');\n        window.getSelection().removeAllRanges();\n        success(false);\n      } catch (e) {\n        console.error(e);\n        error('不支持复制当前图片！');\n      }\n    }\n  }\n\n  // 请求读取剪切板\n  fn.readClipboard = async () => {\n    const result = await navigator.permissions.query({\n      name: 'clipboard-read'\n    });\n    if (result.state === 'granted' || result.state === 'prompt') {\n      // 修改为 .read()  可以获取剪切板中的文字/图片\n      // 返回的是 ClipboardItem\n      return navigator.clipboard\n        .readText()\n        .then(text => text)\n        .catch(err => Promise.reject(err));\n    }\n    return Promise.reject(result);\n  }\n\n  // 粘贴文本\n  fn.insertAtCaret = (elemt, value) => {\n    const startPos = elemt.selectionStart,\n      endPos = elemt.selectionEnd;\n    if (document.selection) {\n      elemt.focus();\n      var sel = document.selection.createRange();\n      sel.text = value;\n      elemt.focus();\n    } else {\n      if (startPos || startPos == '0') {\n        var scrollTop = elemt.scrollTop;\n        elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);\n        elemt.focus();\n        elemt.selectionStart = startPos + value.length;\n        elemt.selectionEnd = startPos + value.length;\n        elemt.scrollTop = scrollTop;\n      } else {\n        elemt.value += value;\n        elemt.focus();\n      }\n    }\n  }\n\n  // 执行打印页面\n  fn.printHtml = () => {\n    if (volantis.isReadModel) fn.readingModel();\n    DOMController.setAttribute('details', 'open', 'true');\n    DOMController.remove('.cus-article-bkg');\n    DOMController.remove('.iziToast-overlay');\n    DOMController.remove('.iziToast-wrapper');\n    DOMController.remove('.prev-next');\n    DOMController.remove('footer');\n    DOMController.remove('#l_header');\n    DOMController.remove('#l_cover');\n    DOMController.remove('#l_side');\n    DOMController.remove('#comments');\n    DOMController.remove('#s-top');\n    DOMController.remove('#BKG');\n    DOMController.remove('#rightmenu-wrapper');\n    DOMController.remove('.nav-tabs');\n    DOMController.remove('.parallax-mirror');\n    DOMController.remove('.new-meta-item.share');\n    DOMController.remove('div.footer');\n    DOMController.setStyle('body', 'backgroundColor', 'unset');\n    DOMController.setStyle('#l_main', 'width', '100%');\n    DOMController.setStyle('#post', 'boxShadow', 'none');\n    DOMController.setStyle('#post', 'background', 'none');\n    DOMController.setStyle('#post', 'padding', '0');\n    DOMController.setStyle('h1', 'textAlign', 'center');\n    DOMController.setStyle('h1', 'fontWeight', '600');\n    DOMController.setStyle('h1', 'fontSize', '2rem');\n    DOMController.setStyle('h1', 'marginBottom', '20px');\n    DOMController.setStyle('.tab-pane', 'display', 'block');\n    DOMController.setStyle('.tab-content', 'borderTop', 'none');\n    DOMController.setStyle('.highlight>table pre', 'whiteSpace', 'pre-wrap');\n    DOMController.setStyle('.highlight>table pre', 'wordBreak', 'break-all');\n    DOMController.setStyle('.fancybox img', 'height', 'auto');\n    DOMController.setStyle('.fancybox img', 'weight', 'auto');\n\n    setTimeout(() => {\n      window.print();\n      document.body.innerHTML = '';\n      window.location.reload();\n    }, 50);\n  }\n\n  // 阅读模式\n  fn.readingModel = () => {\n    if (typeof ScrollReveal === 'function') ScrollReveal().clean('#comments');\n    DOMController.fadeToggle(document.querySelector('#l_header'))\n    DOMController.fadeToggle(document.querySelector('footer'))\n    DOMController.fadeToggle(document.querySelector('#s-top'))\n    DOMController.fadeToggle(document.querySelector('.article-meta#bottom'))\n    DOMController.fadeToggle(document.querySelector('.prev-next'))\n    DOMController.fadeToggle(document.querySelector('#l_side'))\n    DOMController.fadeToggle(document.querySelector('#comments'))\n\n    DOMController.toggleClass(document.querySelector('#l_main'), 'common_read')\n    DOMController.toggleClass(document.querySelector('#l_main'), 'common_read_main')\n    DOMController.toggleClass(document.querySelector('#l_body'), 'common_read')\n    DOMController.toggleClass(document.querySelector('#safearea'), 'common_read')\n    DOMController.toggleClass(document.querySelector('#pjax-container'), 'common_read')\n    DOMController.toggleClass(document.querySelector('#read_bkg'), 'common_read_hide')\n    DOMController.toggleClass(document.querySelector('h1'), 'common_read_h1')\n    DOMController.toggleClass(document.querySelector('#post'), 'post_read')\n    DOMController.toggleClass(document.querySelector('#l_cover'), 'read_cover')\n    DOMController.toggleClass(document.querySelector('.widget.toc-wrapper'), 'post_read')\n\n    volantis.isReadModel = volantis.isReadModel === undefined ? true : !volantis.isReadModel;\n    if (volantis.isReadModel) {\n      const option = {\n        backgroundColor: 'var(--color-read-post)',\n        icon: rightMenuConfig.faicon + ' fa-book-reader',\n        time: 5000\n      }\n      if (messageRightMenu) VolantisApp.message('系统提示', '阅读模式已开启，您可以点击屏幕空白处退出。', option);\n      document.querySelector('#l_body').removeEventListener('click', fn.readingModel);\n      document.querySelector('#l_body').addEventListener('click', (event) => {\n        if (DOMController.hasClass(event.target, 'common_read')) {\n          fn.readingModel();\n        }\n      });\n    } else {\n      document.querySelector('#l_body').removeEventListener('click', fn.readingModel);\n      document.querySelector('#post').removeEventListener('click', fn.readingModel);\n    }\n  }\n\n  return {\n    init: (notice = false) => {\n      fn.init();\n      fn.initEvent();\n      if (notice && messageRightMenu) VolantisApp.message('系统提示', '自定义右键注册成功。');\n    },\n    destroy: (notice = false) => {\n      fn.hideMenu();\n      window.document.oncontextmenu = () => {\n        return true\n      };\n      if (notice && messageRightMenu) VolantisApp.message('系统提示', '自定义右键注销成功。');\n    },\n    hideMenu: fn.hideMenu,\n    readingModel: fn.readingModel\n  }\n})()\n\nObject.freeze(RightMenu);\n\nvolantis.requestAnimationFrame(() => {\n  if (document.readyState !== 'loading') {\n    RightMenu.init();\n\n    volantis.pjax.send(() => {\n      RightMenu.hideMenu();\n    })\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      RightMenu.init();\n\n      volantis.pjax.send(() => {\n        RightMenu.hideMenu();\n      })\n    })\n  }\n});\n"]}